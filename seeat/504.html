<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="description" content="504座位隨機抽選器，快速生成座位表，不用慢慢一個一個用其他選號器抽選，再慢慢寫到黑板上，一個按鈕按下去，直接顯示！">
	<meta name="viewport" content="width=413.571, initial-scale=0.91">
	<title>22nd 504 Set Seat</title>
	<style>
		body {
			width: 100%;
			height: 100%;
			margin: 0;
			background: #e0f0ff;
		}
		table,
		tbody {
			width: 420px;
			height: 300px;
		}
		td {
			width: 100rem;
			height: 50px;
			padding: 0px;
			vertical-align: center;
			text-align: center;
			font-size: 27.5px;
			user-select: none;
		}

		td.chart {
			border: .5px solid #999999;
			border-radius: 7px;
			background: #ffcec2;
			box-shadow: inset -1px -1px 0px 0px #555555;
		}

		button {
			width: 420px;
			height: 40px;
			background: #99a9ff;
			border: 1px solid #999999;
			border-radius: 50px;
			margin-top: 10px;
			font-size: 18px;
			cursor: pointer;
		}

		button:disabled {
			filter: saturate(.5);
			opacity: .75;
			border: 1px solid #c0c0c0;
			cursor: not-allowed;
		}
		h2{
			margin: 0;
			padding: 0;
		}
		h4{
			margin: 0;
			padding: 0;
			margin-left: 230px;
		}
	</style>
</head>

<body>
	<h2>504 Easy Seating Generator</h2>
	<h4>by 50905</h4>
	<div class="formcenter">
		<table>
			<tbody>
				<tr>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
				</tr>
				<tr>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
				</tr>
				<tr>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
				</tr><tr>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
				</tr><tr>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
				</tr><tr>
					<td class=""></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class="chart"></td>
					<td class=""></td>
				</tr>
			</tbody>
		</table>
		<button>快速重新生成</button><br>
		<button>動畫重新生成</button>
	</div>
	<script>
		function an() {
			var e = [];
			for (var i = 1; i < 35; i++) {
				e.push(i);
			};
			e.splice(7, 1);
			e.splice(21, 1);
			e.splice(25, 1);
			return e;
		}
		document.getElementsByTagName('button')[0].onmousedown = gr;
		document.getElementsByTagName('button')[1].onmousedown = agr;
		function gr() {
			var a = an();
			var r = [];
			for (var c = 0; c < 31; c++) {
				r.push(String(a.splice(Math.floor(Math.random() * a.length), 1)).padStart(2, '0'));
			};
			var t = [25, 26, 27, 28, 29, 30, 31, 32, 33]
			var m1 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m1, 0, '08');
			var m2 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m2, 0, '23');
			var m3 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m3, 0, '28');
			check(0, r);
			document.querySelectorAll('.chart').forEach((e, n) => {
				e.innerHTML = r[n];
			});
		}
		async function agr() {
			document.getElementsByTagName('button')[0].disabled = true;
			document.getElementsByTagName('button')[1].disabled = true;
			var a = an();
			var r = [];
			for (var c = 0; c < 31;c++) {
				r.push(String(a.splice(Math.floor(Math.random() * a.length), 1)).padStart(2, '0'));
			};
			var t = [25, 26, 27, 28, 29, 30, 31, 32, 33]
			var m1 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m1, 0, '08');
			var m2 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m2, 0, '23');
			var m3 = Number(t.splice(Math.floor(Math.random() * t.length), 1));
			r.splice(m3, 0, '28');
			check(0, r);
			document.querySelectorAll('.chart').forEach((e, n) => {
				e.innerHTML = '00';
			});
			var anii = [];
			for (var d = 0; d < 34; d++) {
				anii[d] = setInterval("document.querySelectorAll('.chart')[" + d + "].innerHTML = String(Math.floor(Math.random() * 36) + 1).padStart(2, '0')", 1);
			};
			for (var q = 0; q < 34; q++) {
				await delay(0.05);
				clearInterval(anii[q]);
				document.querySelectorAll('.chart')[q].innerHTML = r[q];
			};
			document.getElementsByTagName('button')[0].disabled = false;
			document.getElementsByTagName('button')[1].disabled = false;
		}
		function check(v, r){
			if(r[29] == '08'){
				r.splice(29, 1, String(r[v + 24]).padStart(2, '0'));
				r.splice(v + 24, 1, '08');
				return check(v + 1, r);
			}
			else if(r[29] == '23'){
				r.splice(29, 1, String(r[v + 24]).padStart(2, '0'));
				r.splice(v + 24, 1, '23');
				return check(v + 1, r);
			}
			else if(r[29] == '28'){
				r.splice(29, 1, String(r[v + 24]).padStart(2, '0'));
				r.splice(v + 24, 1, '28');
				return check(v + 1, r);
			}
		}
		function delay(n) {
			return new Promise(function (resolve) {
				setTimeout(resolve, n * 1000);
			});
		}
		document.querySelectorAll('.chart').forEach((e, n) => {
			e.innerHTML = '&nbsp;&nbsp;';
		});
	</script>
</body>
</html>